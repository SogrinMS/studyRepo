<meta charset="utf-8">
<script>
	var string = prompt('Введите выражение через пробел');
	var arr = string.split(' ');
	var result = 0, start = 0, index = 1;
	var flag = false, firstLoop = true;

	if (isNaN(Number(arr[0]))) {
		//первые операторы
		for (var i = 0; i < arr.length; i++) {
			if (!isNaN(Number(arr[i]))) {
				start = i;
				flag = true;
				break;
			}
		}
	}
	else {
		//первые операнды
		for (var i = arr.length - 1; i >= 0; i--) {
			if (!isNaN(Number(arr[i]))) {
				start = i;
				break;
			}
		}
	}

	while (arr[start] != undefined) {
		if (flag) {
			result = firstOperators(arr, start, index, result, firstLoop);
		}
		else {
			result = firstOperands(arr, start, index, result, firstLoop);
			if (firstLoop) {
				start -= 2;
			}
			else if (start >= 1 && !firstLoop) {
				start -= 1;
			}
		}
		firstLoop = false;
		index++;
	}
	console.log('result ' + result);

	function firstOperators(arr, start, index, result, firstLoop) {
		arr[start] = parseInt(arr[start]);
		if (firstLoop) {
			arr[start + 1] = parseInt(arr[start + 1]);
			switch (arr[start - index]) {
				case '+':
					result = arr[start] + arr[start + 1];
					break;
				case '-':
					result = arr[start] - arr[start + 1];
					break;
				case '*':
					result = arr[start] * arr[start + 1];
					break;
				case '/': 
					result = arr[start] / arr[start + 1];
					break;
				default:
					break;
			}
			arr.splice(start, 2);
		}
		else {
			switch(arr[start - index]) {
				case '+': 
					result += arr[start];
					break;
				case '-':
					result -= arr[start];
					break;
				case '*': 
					result *= arr[start];
					break;
				case '/':
					result /= arr[start];
					break;
				default:
					break;
			}
			arr.splice(start, 1);
		}
		return result;
	}

	function firstOperands(arr, start, index, result, firstLoop) {
		arr[start] = parseInt(arr[start]);
		if (firstLoop) {
			arr[start - 1] = parseInt(arr[start - 1]);
			switch (arr[start + index]) {
				case '+':
					result = arr[start] + arr[start - 1];
					break;
				case '-':
					result = arr[start] - arr[start - 1];
					break;
				case '*':
					result = arr[start] * arr[start - 1];
					break;
				case '/':
					result = arr[start] / arr[start - 1];
					break;
				default:
					break;
			}
			arr.splice(start - 1, 2);
			
		}
		else {
			switch(arr[start + index]) {
				case '+':
					result += arr[start];
					break;
				case '-':
					result -= arr[start];
					break;
				case '*':
					result *= arr[start];
					break;
				case '/':
					result /= arr[start];
					break;
				default:
					break;
			}
			arr.splice(start, 1);
		}
		return result;
	}
</script>